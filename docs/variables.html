<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Variables | CPRD - Tutorial</title>
  <meta name="description" content="4 Variables | CPRD - Tutorial" />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Variables | CPRD - Tutorial" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="4 Variables | CPRD - Tutorial" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Variables | CPRD - Tutorial" />
  
  <meta name="twitter:description" content="4 Variables | CPRD - Tutorial" />
  

<meta name="author" content="Exeter Diabetes team" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="setting-up-datasets.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script language="javascript"> 
    function toggle(id) {
        var ele = document.getElementById("toggleText" + id);
        var text = document.getElementById("displayText" + id);
        var buttonText = text.innerHTML.replace("Show: ", "");
        buttonText = buttonText.replace("Hide: ", "");
        if(ele.style.display == "block") {
            ele.style.display = "none";
            text.innerHTML = "Show: " + buttonText;
        } else {
            ele.style.display = "block";
            text.innerHTML = "Hide: " + buttonText;
        }
    } 
</script>

<script language="javascript">
    function openCode(evt, codeName, id) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent" + id);
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks" + id);
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(codeName).style.display = "block";
        evt.currentTarget.className += " active";
    }
</script>

<script language="javascript">
    function hide(id){
        document.getElementById(id).style.display = "none";
    }
</script>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">




<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Intro</a></li>
<li class="chapter" data-level="2" data-path="accessing-cprd-data.html"><a href="accessing-cprd-data.html"><i class="fa fa-check"></i><b>2</b> Accessing CPRD data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="accessing-cprd-data.html"><a href="accessing-cprd-data.html#cprd-dataset"><i class="fa fa-check"></i><b>2.1</b> CPRD dataset</a></li>
<li class="chapter" data-level="2.2" data-path="accessing-cprd-data.html"><a href="accessing-cprd-data.html#requesting-a-new-download"><i class="fa fa-check"></i><b>2.2</b> Requesting a new download</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="accessing-cprd-data.html"><a href="accessing-cprd-data.html#codelist"><i class="fa fa-check"></i><b>2.2.1</b> Codelist</a></li>
<li class="chapter" data-level="2.2.2" data-path="accessing-cprd-data.html"><a href="accessing-cprd-data.html#cprd-data-storage"><i class="fa fa-check"></i><b>2.2.2</b> CPRD data storage</a></li>
<li class="chapter" data-level="2.2.3" data-path="accessing-cprd-data.html"><a href="accessing-cprd-data.html#mysql-setting-up-the-data"><i class="fa fa-check"></i><b>2.2.3</b> MySQL setting up the data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="setting-up-datasets.html"><a href="setting-up-datasets.html"><i class="fa fa-check"></i><b>3</b> Setting up datasets</a>
<ul>
<li class="chapter" data-level="3.1" data-path="setting-up-datasets.html"><a href="setting-up-datasets.html#creating-new-tables-in-mysql"><i class="fa fa-check"></i><b>3.1</b> Creating new tables in MySQL</a></li>
<li class="chapter" data-level="3.2" data-path="setting-up-datasets.html"><a href="setting-up-datasets.html#importing-data-into-local-rstudio-session"><i class="fa fa-check"></i><b>3.2</b> Importing data into local RStudio session</a></li>
<li class="chapter" data-level="3.3" data-path="setting-up-datasets.html"><a href="setting-up-datasets.html#other-tips"><i class="fa fa-check"></i><b>3.3</b> Other tips</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="variables.html"><a href="variables.html"><i class="fa fa-check"></i><b>4</b> Variables</a>
<ul>
<li class="chapter" data-level="4.1" data-path="variables.html"><a href="variables.html#codelist-1"><i class="fa fa-check"></i><b>4.1</b> Codelist</a></li>
<li class="chapter" data-level="4.2" data-path="variables.html"><a href="variables.html#variable-definitions"><i class="fa fa-check"></i><b>4.2</b> Variable definitions</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">CPRD - Tutorial</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="variables" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">4</span> Variables<a href="variables.html#variables" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This section provides variable definitions which the Exeter Diabetes team uses for their datasets.</p>
<div id="codelist-1" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Codelist<a href="variables.html#codelist-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The Exeter Diabetes codelists are available at <a href="https://github.com/Exeter-Diabetes/CPRD-Codelists">Exeter-Diabetes/CPRD-Codelists</a>.</p>
<p>This repository includes <strong>Medcodes</strong> (for use with the Observation table) and <strong>Prodcodes</strong> (for use with the Drug Issue table), as well as <strong>ICD10</strong> and <strong>OPCS4</strong> codelists for use with linked HES APC data. All codelists have been clinically-reviewed except a small subset where review by a non-clinician was deemed acceptable (BMI, weight, height and blood pressure readings) or where PBCL biomarker codes were used (see Codelist generation process: <a href="https://github.com/Exeter-Diabetes/CPRD-Codelists/blob/main/readme.md#code-list-generation-process">https://github.com/Exeter-Diabetes/CPRD-Codelists/blob/main/readme.md#code-list-generation-process</a>).</p>
<p>We have also included <strong>Read</strong> and <strong>SNOMED</strong> codelists created during medcode list development (see Codelist generation process); where available, these are located in each of the subfolders in the <strong>Medcodes</strong> folder.</p>
<p>All codelists are based on an October 2020 extract of CPRD Aurum; later versions may include extra <strong>Medcodes/Procodes</strong> not included here.</p>
</div>
<div id="variable-definitions" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Variable definitions<a href="variables.html#variable-definitions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The definitions and derivation algorithms for the variables used are available at <a href="https://github.com/Exeter-Diabetes/CPRD-Codelists">Exeter-Diabetes/CPRD-Codelists</a>.</p>
<p>This GitHub repository, provides a detailed view on:</p>
<ol style="list-style-type: decimal">
<li>Biomarker derivation algorithms (<a href="https://github.com/Exeter-Diabetes/CPRD-Codelists/tree/main?tab=readme-ov-file#biomarker-algorithms">https://github.com/Exeter-Diabetes/CPRD-Codelists/tree/main?tab=readme-ov-file#biomarker-algorithms</a>)</li>
</ol>
<p>We have developed the R package <code>EHRBiomarkr</code> (available in the GitHub repository <a href="https://github.com/Exeter-Diabetes/EHRBiomarkr">Exeter-Diabetes/EHRBiomarkr</a>), which includes various functions for cleaning and processing biomarkers in EHR, especially in CPRD Aurum. All functions can be used on local data (loaded into R) or data stored in MySQL (by using the <code>dbplyr</code> package or another package which uses <code>dbplyr</code>).</p>
<p>Two functions for cleaning biomarkers values are included in this package:</p>
<ul>
<li><p><code>clean_biomarkers_values</code>: removes values outside of plausible limits. Run <code>?biomarkerAcceptableLimits</code> for details of how these were ascertained and further explanation of variables. More information on the variable limits can be found here: <a href="https://github.com/Exeter-Diabetes/CPRD-Codelists/blob/main/Medcodes/Biomarkers/biomarker_acceptable_limits.txt">https://github.com/Exeter-Diabetes/CPRD-Codelists/blob/main/Medcodes/Biomarkers/biomarker_acceptable_limits.txt</a>.</p></li>
<li><p><code>clean_biomarkers_units</code>: retains only values with appropriate unit codes (numunitid) or missing unit code in CPRD Aurum. Run <code>?biomarkerAcceptableUnits</code> for details of how these were ascertained and further explanation of variables. More information on the variable unit codes can be found here: <a href="https://github.com/Exeter-Diabetes/CPRD-Codelists/blob/main/Medcodes/Biomarkers/biomarker_acceptable_units.txt">https://github.com/Exeter-Diabetes/CPRD-Codelists/blob/main/Medcodes/Biomarkers/biomarker_acceptable_units.txt</a>.</p></li>
</ul>
<p>These functions can be applied to a large range of biomarkers. See this for more information: <a href="https://github.com/Exeter-Diabetes/EHRBiomarkr?tab=readme-ov-file#biomarker-cleaning-functions">https://github.com/Exeter-Diabetes/EHRBiomarkr?tab=readme-ov-file#biomarker-cleaning-functions</a></p>
<p>The R package also includes functions for calculating more complex variables such as:</p>
<ul>
<li><p>eGFR from creatinine, age and sex: <a href="https://github.com/Exeter-Diabetes/EHRBiomarkr?tab=readme-ov-file#egfr-from-creatinine-age-and-sex-using-ckd-epi-creatinine-equation-2021">https://github.com/Exeter-Diabetes/EHRBiomarkr?tab=readme-ov-file#egfr-from-creatinine-age-and-sex-using-ckd-epi-creatinine-equation-2021</a></p></li>
<li><p>cardiovascular risk score functions: <a href="https://github.com/Exeter-Diabetes/EHRBiomarkr?tab=readme-ov-file#cardiovascular-risk-score-functions">https://github.com/Exeter-Diabetes/EHRBiomarkr?tab=readme-ov-file#cardiovascular-risk-score-functions</a></p></li>
<li><p>kidney risk score functions: <a href="https://github.com/Exeter-Diabetes/EHRBiomarkr?tab=readme-ov-file#kidney-risk-score-functions">https://github.com/Exeter-Diabetes/EHRBiomarkr?tab=readme-ov-file#kidney-risk-score-functions</a></p></li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li><p>Comorbidity derivation algorithms (<a href="https://github.com/Exeter-Diabetes/CPRD-Codelists/tree/main?tab=readme-ov-file#comorbidity-algorithms">https://github.com/Exeter-Diabetes/CPRD-Codelists/tree/main?tab=readme-ov-file#comorbidity-algorithms</a>)</p></li>
<li><p>Diabetes derivation algorithms (<a href="https://github.com/Exeter-Diabetes/CPRD-Codelists/tree/main?tab=readme-ov-file#diabetes-algorithms">https://github.com/Exeter-Diabetes/CPRD-Codelists/tree/main?tab=readme-ov-file#diabetes-algorithms</a>)</p></li>
<li><p>Sociodemographics derivation algorithms (<a href="https://github.com/Exeter-Diabetes/CPRD-Codelists/tree/main?tab=readme-ov-file#sociodemographics-algorithms">https://github.com/Exeter-Diabetes/CPRD-Codelists/tree/main?tab=readme-ov-file#sociodemographics-algorithms</a>)</p></li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="setting-up-datasets.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
